<apex:page title="Itinerary Builder" showHeader="true" standardController="Opportunity" extensions="ItineraryBuilderController" sidebar="false" standardStylesheets="false" cache="false">
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> 
        <head>
            
            
            <c:IBPageJSScripts />
            <c:TypeHeadAutoComplete />
            <c:GoogleMapComponent />
            <script data-require="lodash.js@*" data-semver="2.4.1" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js"></script>
        </head>
        <style>
            pre { margin-top: 10px; }
                .typeahead-group-header {
                  padding: 3px 20px;
                  border-bottom: 1px solid black;
                  font-weight: bold;
                }
                .slds .slds-checkbox .slds-form-element__label {
                    font-size: 12px;
                    font-weight: bold;
                }
        </style> 
        <script>
            function redirect(url) {
                if ( (typeof sforce != 'undefined') && (sforce != null) ) {
                    sforce.one.navigateToURL(url);
                }
                else {
                    location.href = url;
                }
            };
          
        </script>     
        <body>
            <apex:form >
                <apex:actionFunction name="oppDetail" status="loading" action="{!refresh}" reRender="oppDetail"/>
            </apex:form> 
            <div ng-app="MyApp" ng-cloak="ng-cloak"> 
                <div id="IBController" ng-controller="IBController" >
                    <div class="slds">        
                        <c:Loading />
                        <c:AlertBox />
                        <apex:outputPanel id="oppDetail">
                            <c:OpportunityDetailComponent ></c:OpportunityDetailComponent>
                        </apex:outputPanel>
                        <div class="slds-grid slds-wrap">
                            <div class="slds-col slds-size--1-of-2">
                                <c:TravellingCountryMap OppId="{!$CurrentPage.parameters.id}" />
                            </div>
                            <div class="slds-col slds-size--1-of-2">
                                <apex:include pageName="CostOptionsChart"/>
                            </div>
                        </div>
                        <!-- Widget and Opp Detail Section --->
                        <div class="slds-card">
                            <div class="slds-card__header slds-grid">
                                <div class="ib-buttons slds-x-small-buttons--horizontal" style="margin-left:-8px">
                                    <button ng-class="{groupMemberRed : groupMemberRed}" class="slds-button slds-button--brand" onclick="$('.groupMembers').toggle('Show');return false;" style="margin-left:8px">Client Group Members</button><!--
                                    --><a class="slds-button slds-button--brand" target="_blank" style="color: white;text-decoration: none;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Itinerary_Category__c}?id={!$CurrentPage.parameters.id}','_blank')">Itinerary Category</a><!--
                                    --><a class="slds-button slds-button--brand" target="_blank" style="color: white;text-decoration: none;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Cover_Image__c}?id={!$CurrentPage.parameters.id}','_blank')">Cover Image</a><!--
                                    --><a class="slds-button slds-button--brand" target="_blank" style="color: white;text-decoration: none;"  onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Itinerary_Settings__c}?id={!$CurrentPage.parameters.id}','_blank')">Itinerary Setting</a><!-- 
                                    --><a class="slds-button slds-button--brand" target="_blank" style="color: white;text-decoration: none;" onclick="window.open('/apex/{!nameSpacePrefix}PreviewAsPDF?id={!$CurrentPage.parameters.id}','_blank')">Preview</a><!--   
                                    --><a class="slds-button slds-button--brand" target="_blank" style="color: white;text-decoration: none;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Client_Payments__c}?id={!$CurrentPage.parameters.id}','_blank')">Client Payments</a><!--
                                    --><a class="slds-button slds-button--brand" target="_blank" style="color: white;text-decoration: none;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Supplier_Payments__c}?id={!$CurrentPage.parameters.id}','_blank')">Supplier Payments</a><!--
                                    --><a class="slds-button slds-button--brand" target="_blank" style="color: white;text-decoration: none;" onclick="$('.notesPopup').toggle('Show');return false;" ng-click="openNotesPopup()">Notes</a><!--
                                    --><button  class="slds-button slds-button--brand" ng-disabled="opp['{!nameSpacePrefix}O_Lock__c']" ng-click="openChangeDatePopup()">Change Dates</button>
                                     <div class="slds-button-group" role="group" style="display: inline;">
                                        <div class="slds-dropdown-trigger">
                                            <button class="slds-button slds-button--icon-border-filled slds-button--brand" aria-haspopup="true" style="padding-left: 9px;color: white;height: 29px;    border-radius: 4px;">
                                                <svg aria-hidden="true" class="slds-button__icon">
                                                    <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#down')}"></use>
                                                </svg>
                                                <span class="slds-assistive-text">More Actions</span>
                                            </button>
                                            <div class="slds-dropdown slds-dropdown--left slds-dropdown--menu" >
                                                <ul class="slds-dropdown__list" role="menu">
                                                    <li href="#">
                                                        <a ng-disabled="opp['{!nameSpacePrefix}O_Lock__c']" class="slds-button slds-button--brand" target="_blank"  style="color: white;text-decoration: none;width:150px;" onclick="window.open('/apex/{!nameSpacePrefix}CostOptions?id={!$CurrentPage.parameters.id}','_blank')">Change Costs</a>
                                                    </li>
                                                    <li href="#">
                                                        <a class="slds-button slds-button--brand" target="_blank" style="color: white;text-decoration: none;width:150px;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Final_Docs_Setting__c}?id={!$CurrentPage.parameters.id}','_blank')">Final Docs Setting</a>    
                                                    </li>
                                                    <li href="#">
                                                        <a class="slds-button slds-button--brand" target="_blank"  style="color: white;text-decoration: none;width:150px;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Final_Docs_Category__c}?id={!$CurrentPage.parameters.id}','_blank')">Final Docs Category</a>    
                                                    </li>
                                                    <li href="#">
                                                        <a class="slds-button slds-button--brand" target="_blank"   style="color: white;text-decoration: none;width:150px;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Send_Email__c}','_blank')">Send Email</a>    
                                                    </li>
                                                    <li href="#">
                                                        <a class="slds-button slds-button--brand" target="_blank"   style="color: white;text-decoration: none;width:150px;" onclick="window.open('/apex/{!nameSpacePrefix}CopyOpportunity?id={!$CurrentPage.parameters.id}','_blank')">Clone</a>    
                                                    </li>
                                                    <li href="#">
                                                        <a class="slds-button slds-button--brand" target="_blank"   style="color: white;text-decoration: none;width:150px;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.Itinerary_Web__c}?id={!$CurrentPage.parameters.id}','_blank')">Itinerary Web</a>    
                                                    </li>
                                                    <li href="#">
                                                        <a class="slds-button slds-button--brand" target="_blank"   style="color: white;text-decoration: none;width:150px;" onclick="window.open('/apex/{!$Setup.Custom_Button_URL__c.ATOL__c}?id={!$CurrentPage.parameters.id}','_blank')">ATOL</a>    
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <span  style="display:inline-block;marign-left:8px;">
                                        <label class="slds-checkbox">
                                            <input name="Selected{{$index}}" ng-change="includeFlightMargin()" type="checkbox" id="fselected" ng-model="opp['{!nameSpacePrefix}O_Include_Flight_Margin__c']"/>
                                            <span class="slds-checkbox--faux"></span>
                                            <span class="slds-form-element__label">Include Flight Mark-up</span>
                                        </label>
                                    </span>
                                    
                                </div>        
                            </div>
                            <div class="slds-card__body">
                               
                            </div>
                        </div>
                        
                        
                        <!-- Supplier Booking Table -->
                        <div class="slds-card" ng-form="IBForm">
                            <div class="slds-card__header slds-grid">
                                <div class="slds-media slds-media--center slds-has-flexi-truncate">
                                    <div class="slds-media__figure">
                                        <img src="{!URLFOR($Resource.SLDS011, '/assets/icons/utility/table_60.png')}" style="height: 20px;cursor: pointer;"></img>
                                    </div>
                                    <div class="slds-media__body">
                                        <h2 class="slds-text-heading--small slds-truncate">Itinerary Builder</h2>
                                    </div>
                                </div>
                                <div class="slds-no-flex">
                                    <div class="slds-button-group">
                                        <img ng-show="toggleIB==false" ng-click="collapse('IB')" src="{!URLFOR($Resource.SLDS011, '/assets/icons/utility/down_60.png')}" style="height: 20px;cursor: pointer;"></img>
                                        <img ng-show="toggleIB==true" ng-click="collapse('IB')" src="{!URLFOR($Resource.SLDS011, '/assets/icons/utility/up_60.png')}" style="height: 20px;cursor: pointer;"></img>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-card__body" ng-class="{toggle : toggleIB}">
                                <div class="slds-scrollable--x">
                                    <table class="itinerary slds-table slds-table--bordered SBTable" navigatable="navigatable">
                                        <thead>
                                            <tr> 
                                                <th colspan="1" class="headerRow textCenter"></th>
                                                <th colspan="1" class="headerRow textCenter"><div>Day</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>Duration</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>Component</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>Date</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>Time</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>To Date</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>To Time</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>From</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>To</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>Cost</div></th>
                                                <!--<th colspan="1" class="headerRow textCenter"><div>Margin %</div></th> -->
                                                <th colspan="1" class="headerRow textCenter"><div>Notes</div></th>
                                                <th colspan="1" class="headerRow textCenter"><div>Action</div></th>
                                            </tr>
                                        </thead>
                                        <tbody ui-sortable="sortableOptions" ng-model="supplierBookings">
                                            <tr  ng-repeat="sbVar in supplierBookings" style="cursor: move;"  ng-form="row{{$index}}" ng-class="getBGColor(sbVar)" >
                                                <td style="width: 40px;">
                                                    <img ng-show="mapRecordtype[sbVar.RecordTypeId] == 'Accommodation'" src="{!URLFOR($Resource.Framework,'SugatiIcon/Accommodation.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="mapRecordtype[sbVar.RecordTypeId] == 'Own arrangement'" src="{!URLFOR($Resource.Framework,'SugatiIcon/v1-Re-own-arrangement-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="mapRecordtype[sbVar.RecordTypeId] == 'Car Hire'" src="{!URLFOR($Resource.Framework,'SugatiIcon/CarHire.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Int Flight' || mapRecordtype[sbVar.RecordTypeId] == 'Dom Flights' || mapRecordtype[sbVar.RecordTypeId] == 'Light Aircraft' || mapRecordtype[sbVar.RecordTypeId] == 'Sea Plane' || mapRecordtype[sbVar.RecordTypeId] == 'Private Jet')" src="{!URLFOR($Resource.Framework,'SugatiIcon/Flight.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="mapRecordtype[sbVar.RecordTypeId] == 'Rail'" src="{!URLFOR($Resource.Framework,'SugatiIcon/Rail.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Cruise')" src="{!URLFOR($Resource.Framework,'SugatiIcon/speed-boat-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Motorbike Ride' || mapRecordtype[sbVar.RecordTypeId] == 'Notes' || mapRecordtype[sbVar.RecordTypeId] == 'Description')" src="{!URLFOR($Resource.Framework,'SugatiIcon/Notes.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] ==  'Shared Transfer with Excursion' || mapRecordtype[sbVar.RecordTypeId] == 'Private Road Transfer' || mapRecordtype[sbVar.RecordTypeId] == 'Transfer' || mapRecordtype[sbVar.RecordTypeId] == 'Shared Road Transfer' || mapRecordtype[sbVar.RecordTypeId] == 'Private Transfer with Excursion')" src="{!URLFOR($Resource.Framework,'SugatiIcon/CarHire.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Credit Memo' || mapRecordtype[sbVar.RecordTypeId] == 'Commission In' || mapRecordtype[sbVar.RecordTypeId] == 'Commission Out' || mapRecordtype[sbVar.RecordTypeId] == 'Credit Card')" src="{!URLFOR($Resource.Framework,'SugatiIcon/currency-v2-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Meet & Greet')" src="{!URLFOR($Resource.Framework,'SugatiIcon/meet-greet-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'VIP Meet And Greet')" src="{!URLFOR($Resource.Framework,'SugatiIcon/vip-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Ferry')" src="{!URLFOR($Resource.Framework,'SugatiIcon/Ferry.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Days at Leisure')" src="{!URLFOR($Resource.Framework,'SugatiIcon/Leisure.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Excursion')" src="{!URLFOR($Resource.Framework,'SugatiIcon/Excursion.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Private Speed Boat Transfer' || mapRecordtype[sbVar.RecordTypeId] == 'Shared Speed Boat Transfer')" src="{!URLFOR($Resource.Framework,'SugatiIcon/speed-boat-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId]  == 'Complimentary' || mapRecordtype[sbVar.RecordTypeId] == 'Bulk Cost')" src="{!URLFOR($Resource.Framework,'SugatiIcon/bulk-cost-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Visa Fast Track')" src="{!URLFOR($Resource.Framework,'SugatiIcon/visa-track-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                    <img ng-show="(mapRecordtype[sbVar.RecordTypeId] == 'Tuck-Tuck')" src="{!URLFOR($Resource.Framework,'SugatiIcon/tuk-orange.png')}" Class="slds-icon slds-icon--small iconsIB" />
                                                </td>
                                                <td style="width: 45px !important;">
                                                    <input type="number" step="1" min="1" max="{{holidayDuration('','')}}" ng-blur="changeDayDuration(sbVar)"  ng-model="sbVar[nameSpacePrefix+'SB_Day__c']" class="slds-input" style="width: 45px;padding-right: 2px;"/>
                                                </td>
                                                <td style="width: 45px !important;">
                                                    <input type="number" step="1" min="0" max="{{holidayDuration(sbVar[nameSpacePrefix+'SB_Day__c'], sbVar[nameSpacePrefix+'SB_Duration__c'])}}" ng-blur="changeDayDuration(sbVar)"  ng-model="sbVar[nameSpacePrefix+'SB_Duration__c']" class="slds-input" style="width: 45px;padding-right: 2px;"/>
                                                </td>
                                                
                                                <td style="width: 165px !important;">  
                                                    <select ng-model="sbVar.RecordTypeId" class="slds-input" ng-change="changeComponent(sbVar,$index)" ng-focus="setComponentId(sbVar)" ng-options="record.value as record.label for record in recordTypes">
                                                        <option ng-show="sbVar.RecordTypeId !== undefined" selected="selected" value="">--Select--</option>    
                                                    </select>
                                                    
                                                </td>
                                                <td style="width: 95px;">          
                                                     <input type="text" jqdatepicker="jqdatepicker" ng-required="checkSBRequired(sbVar,'From Date')" ng-change="changeDate(sbVar)" ng-init="updateDate(sbVar)" class="slds-input"  ng-model="sbVar[nameSpacePrefix+'SB_From_Date__c']"   style="width: 95px;"/>
                                                </td>
                                                <td style="width: 36px;">
                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-required="checkSBRequired(sbVar,'From Time')" ng-model="sbVar[nameSpacePrefix+'SB_From_Time__c']" typeahead-input-formatter="formatInputTime($model)" 
                                                    typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5" 
                                                    style="width: 60px;"/>
                                                </td>
                                                <td style="width: 95px;">
                                                    <input  type="text" jqdatepicker="jqdatepicker" ng-required="checkSBRequired(sbVar,'To Date')" ng-change="changeDate(sbVar)" ng-init="updateDate(sbVar)" class="slds-input"  ng-model="sbVar[nameSpacePrefix+'SB_To_Date__c']"  style="width: 95px;"/> 
                                                </td>
                                                <td  style="width: 36px;">
                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-required="checkSBRequired(sbVar,'To Time')" ng-model="sbVar[nameSpacePrefix+'SB_To_Time__c']" typeahead-input-formatter="formatInputTime($model)" 
                                                    typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:50" 
                                                    style="width: 60px;"/>
                                                </td>
                                                <td style="width: 140px;">
                                                    <input type="text" class="slds-input" ng-model="sbVar[nameSpacePrefix+'SB_From_Place__c']" ng-change="checkFromValue(sbVar)" ng-required="checkSBRequired(sbVar,'From Place')" typeahead-editable="true" typeahead-input-formatter="formatInputSB($model,sbVar,'From')" 
                                                    typeahead="state.label as state.label for state in getDataFrom(sbVar.RecordTypeId) | filter:$viewValue | limitTo:20" 
                                                    style="width: 140px;"/>
                                                </td>
                                                <td style="width: 140px;">
                                                    <input type="text" class="slds-input" ng-model="sbVar[nameSpacePrefix+'SB_To_Place__c']" ng-required="checkSBRequired(sbVar,'To Place')" typeahead-editable="true" typeahead-input-formatter="formatInputSB($model,sbVar,'To')" 
                                                    typeahead="state.label as state.label for state in getDataFrom(sbVar.RecordTypeId) | filter:$viewValue | limitTo:20" 
                                                    style="width: 140px;"/>
                                                </td>
                                                <td style="width: 20px;text-align: right; vertical-align:middle;">{{sbVar[nameSpacePrefix+'SB_Cost__c'] | number:2}}</td>
                                                <!--<td style="width: 20px;text-align: center;">{{sbVar.SB_Avrage_Margin__c}}</td> -->
                                                <td style="width: 110px;">
                                                    <textarea  class="slds-input" ng-model="sbVar[nameSpacePrefix+'SB_Notes__c']" style="width: 120px;height: 30px;line-height: normal !important;"/>
                                                </td>
                                                <td>
                                                    
                                                    <div ng-click="showError($index,sbVar);">
                                                        <button title="More" type="button"  ng-disabled="opp['{!nameSpacePrefix}O_Lock__c'] || row{{$index}}.$invalid || sbVar.RecordTypeId == null" class="blink slds-button slds-button--neutral slds-button--small" ng-click="openSB('lg',$index,sbVar.RecordTypeId)">
                                                            <img  src="{!URLFOR($Resource.Framework,'Icone/Notes.png')}" Class="slds-icon slds-icon--small"  style="width: 18px;"/>
                                                        </button>
                                                        <button title="Clone" type="button"  ng-disabled="opp['{!nameSpacePrefix}O_Lock__c'] || row{{$index}}.$invalid || sbVar.RecordTypeId == null" class="blink slds-button slds-button--neutral slds-button--small" ng-click="CloneRow($index)">
                                                            <img src="{!URLFOR($Resource.Framework,'Icone/clone.png')}" Class="slds-icon slds-icon--small"  style="width: 18px;"/>
                                                        </button>
                                                        <button title="Add Row" type="button" ng-disabled="opp['{!nameSpacePrefix}O_Lock__c']" class="blink slds-button slds-button--neutral slds-button--small" ng-click="AddRow($index)">
                                                            <img src="{!URLFOR($Resource.Framework,'Icone/add.png')}" Class="slds-icon slds-icon--small"  style="width: 18px;"/>
                                                        </button>
                                                        <button title="Delete" type="button" ng-disabled="opp['{!nameSpacePrefix}O_Lock__c']" class="blink slds-button slds-button--neutral slds-button--small" ng-click="DeleteRow($index)">
                                                            <img src="{!URLFOR($Resource.Framework,'Icone/delete.png')}" Class="slds-icon slds-icon--small"  style="width: 18px;"/>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>                 
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="slds-card__footer" ng-class="{toggle : toggleIB}">
                                <span class="input-group-addon">
                                    <input type="button" id="btnSave" ng-disabled="opp['{!nameSpacePrefix}O_Lock__c'] || IBForm.$invalid" ng-click="saveSB()" class="slds-button slds-button--brand"   value="Save All" />
                                </span>
                                <span ng-show="opp['{!nameSpacePrefix}O_Lock__c'] == false">&nbsp;&nbsp;Add more rows</span>
                                <select ng-show="opp['{!nameSpacePrefix}O_Lock__c'] == false" ng-model="SBsAdded" ng-change="addMoreSB()" id="moreSB" Class="slds-select" ng-options="n for n in [] | range:0:11" style="width: 45px;">
                                    <option value="0" label="--Select--"></option>        
                                </select>
                            </div>
                        </div>
                        <!-- Supplier Booking Table End-->
                
                        
                        
                        <!--- Supplier Booking Popup -->
                        <div>
                            <form name="popupForm" style="font-size:11px !important">
                                
                                <div aria-hidden="false" role="dialog" style="display:none" class="accountAddrees slds-modal slds-modal--large slds-fade-in-open">
                                    <div class="slds-modal__container">
                                        <div class="slds-modal__header" style="padding: 10px 16px;">
                                            <h2 class="slds-text-heading--medium" style="font-size:17px;"><a><h1>{{currentRt}}</h1></a><strong>{{addressAccount.Name}}</strong></h2>
                                            <div class="slds-form-element slds-col slds-size--1-of-1" style="font-size: inherit !important;">
                                                <label class="slds-form-element__label" ng-show="items[nameSpacePrefix+'SB_From_Place__c'] !== undefined"><strong>From</strong> - {{items[nameSpacePrefix+'SB_From_Place__c']}}</label> 
                                                <label class="slds-form-element__label" ng-show="items[nameSpacePrefix+'SB_To_Place__c'] !== undefined"><strong>To</strong> - {{items[nameSpacePrefix+'SB_To_Place__c']}}</label> 
                                                <label class="slds-form-element__label" ng-show="notShow(currentRt,'Itinerary')"><strong>Start Date</strong> - {{items[nameSpacePrefix+'SB_From_Date__c']}}</label>
                                                <label class="slds-form-element__label" ng-show="notShow(currentRt,'Itinerary')"><strong>End Date</strong> - {{items[nameSpacePrefix+'SB_To_Date__c']}}</label> 
                                                <label class="slds-form-element__label" ng-show="(currentRt == 'Accommodation')"> 
                                                    <strong>Nights</strong> - {{night}}
                                                </label>
                                                <label class="slds-form-element__label" ng-show="false && (currentRt.indexOf('Flight')!= -1 || currentRt.indexOf('Aircraft')!= -1 || currentRt.indexOf('Plan')!= -1)"> 
                                                    <strong>Flight Duration</strong> - {{fDuration}} Hrs
                                                </label>
                                                <div ng-show="(  currentRt != 'Credit Card' && currentRt != 'Complimentary'  && currentRt != 'Bulk Cost' && currentRt != 'Credit Memo' && currentRt != 'Commission In' && currentRt != 'Commission Out')" class="slds-form-element" style="display:inline">
                                                    <label class="slds-checkbox">
                                                        <input name="checkbox{{$index}}" type="checkbox" id="SB_Own_Arrangement__c" ng-model="items[nameSpacePrefix+'SB_Own_Arrangement__c']"/>
                                                        <span class="slds-checkbox--faux"></span>
                                                        <span class="slds-form-element__label">Own Arrangement</span>
                                                    </label>
                                                </div>
                                                <div ng-show="(currentRt.indexOf('Flight')!= -1 || currentRt.indexOf('Aircraft')!= -1 || currentRt.indexOf('Plan')!= -1 || currentRt=='Accommodation' || currentRt=='Transfer' || currentRt=='Car Hire' || currentRt=='Excursion')" class="slds-form-element" style="display:inline">
                                                    <label class="slds-checkbox">
                                                        <input name="checkbox{{$index}}" type="checkbox" id="Voucher" ng-model="items[nameSpacePrefix+'SB_Show_Voucher__c']"/>
                                                        <span class="slds-checkbox--faux"></span>
                                                        <span class="slds-form-element__label">Show Voucher</span>
                                                    </label>
                                                </div>
                                                <div ng-show="notShow(currentRt,'Itinerary')" class="slds-form-element" style="display:inline">
                                                    <label class="slds-checkbox">
                                                        <input name="checkbox{{$index}}" type="checkbox" id="Itinerary" ng-model="items[nameSpacePrefix+'SB_Show_in_Itinerary__c']"/>
                                                        <span class="slds-checkbox--faux"></span>
                                                        <span class="slds-form-element__label">Show in Itinerary?</span>
                                                    </label>
                                                </div>
                                                <div class="slds-form-element" ng-show="(currentRt.indexOf('Flight')!= -1 || currentRt.indexOf('Aircraft')!= -1 || currentRt.indexOf('Plan')!= -1)" style="display:inline">
                                                    <label class="slds-checkbox">
                                                        <input name="checkbox{{$index}}" type="checkbox" id="SB_Own_Arrangement__c" ng-model="items[nameSpacePrefix+'SB_Not_Held__c']"/>
                                                        <span class="slds-checkbox--faux"></span>
                                                        <span class="slds-form-element__label">Not Held</span>
                                                    </label>
                                                </div>
                                                <div class="slds-form-element"  style="display:inline" ng-if="opp['{!nameSpacePrefix}O_Is_Group_Booking__c']">
                                                    <label class="slds-checkbox">
                                                        <input name="checkbox{{$index}}" type="checkbox" id="SB_Is_Standard__c" ng-change="openSBFor()" ng-model="items[nameSpacePrefix+'SB_Is_Standard__c']"/>
                                                        <span class="slds-checkbox--faux"></span>
                                                        <span class="slds-form-element__label">Is Standard</span>
                                                    </label>
                                                </div>
                                                
                                                
                                            </div>
                                            <button class="slds-button slds-button--icon-inverse slds-modal__close" onclick="return false;">
                                                <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                                    <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                                </svg>
                                                <span class="slds-assistive-text">Close</span>
                                            </button>
                                        </div>
                                        
                                        <div class="slds-modal__content slds-scrollable--x" style="overflow-y : auto !important">
                                            <!----- Accommodation section ------>
                                            <script type="text/ng-template" id="typeahead-item.html">
                                              <div class="typeahead-group-header" style="background: gray; color:white;" ng-if="match.model.firstInGroup">{{match.model.group_label}}</div>
                                              <a>
                                                <span ng-bind-html="match.label | typeaheadHighlight:query"></span>
                                              </a>
                                            </script>
                                            <div ng-show="currentRt == 'Accommodation'">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Accommodation</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" name="supplier" class="slds-input"  typeahead-editable="false" ng-required="checkSupplierRequired()" ng-disabled="checkSupplierPayment(items)" ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off" typeahead-input-formatter="formatInputSupplier($model,'Accommodation')" 
                                                                        typeahead="state.value as state.label for state in filterAcc(items[nameSpacePrefix+'SB_Where_to_go__c'], $viewValue) | limitTo: 50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Room Type</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="true"  ng-model="items[nameSpacePrefix+'SB_Room_Type__c']" typeahead-input-formatter="formatInputRoom($model,items[nameSpacePrefix+'SB_Supplier__c'],'Room Type')" 
                                                                        typeahead="state.value as state.label for state in autoSuggestRoom[items[nameSpacePrefix+'SB_Supplier__c']]['Room Type'] | filter:$viewValue | limitTo:5" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Occupancy</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  typeahead-editable="true" ng-model="items[nameSpacePrefix+'SB_Occupancy__c']" typeahead-input-formatter="formatInputRoom($model,items[nameSpacePrefix+'SB_Supplier__c'],'Occupancy')" 
                                                                        typeahead="state.value as state.label for state in autoSuggestRoom[items[nameSpacePrefix+'SB_Supplier__c']]['Occupancy'] | filter:$viewValue | limitTo:5"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Meal Basis</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="true" ng-model="items[nameSpacePrefix+'SB_Meal_Basis__c']" typeahead-input-formatter="formatInputRoom($model,items[nameSpacePrefix+'SB_Supplier__c'],'Meal Basis')" 
                                                                        typeahead="state.value as state.label for state in autoSuggestRoom[items[nameSpacePrefix+'SB_Supplier__c']]['Meal Basis'] | filter:$viewValue | limitTo:5"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Booking Number</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Booking_No__c']"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">No of Rooms</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="number" step="1" min="0" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_No_of_Rooms__c']"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                     <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Payment Type</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Payment_Type__c']"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Arranged By</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Ground_Handler__c']" typeahead-input-formatter="formatInputSupplier($model,'Accommodation')" 
                                                    typeahead="state.value as state.label for state in autoSuggestSupplier |filter:{label:$viewValue,type:'DMC'} | limitTo:20"/> 
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">&nbsp;</label>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="convertMergeFields(itineraryTextTemplate[currentRt],items,currentRt);">Compose</button>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="NotesText(true);">Refresh Notes</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            
                                            <!-------- Int Flight,Dom Flights,Light Aircraft ---------->
                                            
                                            <div ng-show="currentRt == 'Int Flight' || currentRt == 'Dom Flights' || currentRt == 'Light Aircraft'">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Supplier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-disabled="checkSupplierPayment(items)" ng-required="checkSupplierRequired()"  ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off" typeahead-input-formatter="formatInputSupplier($model,'Suppli')" 
                                                                        typeahead="state.value as state.label for state in getFilteredSuppliers($viewValue, '') | limitTo: 50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Carrier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Carrier__c']" typeahead-input-formatter="globalFormateInput($model,pickList[nameSpacePrefix+'sb_carrier__c'])" 
                                                                        typeahead="state.label for state in pickList[nameSpacePrefix+'sb_carrier__c'] |filter:{label:$viewValue} | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>   
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Flight No</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Flight_No__c']"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Departure Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" jqdatepicker="jqdatepicker" ng-init="updateDate(sbVar)"  ng-model="items[nameSpacePrefix+'SB_From_Date__c']"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Departure Airport</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Departure_Airport_l__c']" typeahead-input-formatter="globalFormateInput($model,autoSuggestAirport)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestAirport |filter:{label:$viewValue} | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Departure Terminal</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Departure_Terminal__c']" typeahead-input-formatter="globalFormateInput($model,autoSuggestTerminal)" 
                                                                        typeahead="state.label for state in autoSuggestTerminal |filter:{label:$viewValue, type : items[nameSpacePrefix+'SB_Departure_Airport_l__c']} | limitTo:20"/>   
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Arrival Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" jqdatepicker="jqdatepicker" ng-init="updateDate(sbVar)"  ng-model="items[nameSpacePrefix+'SB_To_Date__c']"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Arrival Airport</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Arrival_Airport_l__c']" typeahead-input-formatter="globalFormateInput($model,autoSuggestAirport)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestAirport |filter:{label:$viewValue} | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Arrival Terminal</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Arrival_Terminal__c']" typeahead-input-formatter="globalFormateInput($model,autoSuggestTerminal)" 
                                                                        typeahead="state.label for state in autoSuggestTerminal |filter:{label:$viewValue, type:items[nameSpacePrefix+'SB_Arrival_Airport_l__c']} | limitTo:20"/>      
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Check In Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false"  ng-model="items[nameSpacePrefix+'SB_Check_In_Time__c']" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Departure Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-blur ="checkInTime()"  ng-model="items[nameSpacePrefix+'SB_From_Time__c']" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Arrival Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false"  ng-model="items[nameSpacePrefix+'SB_To_Time__c']" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:20" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Class</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Class__c']" typeahead-input-formatter="globalFormateInput($model,autoSuggestClass)" 
                                                                        typeahead="state.label for state in autoSuggestClass |filter:{label:$viewValue,type:items[nameSpacePrefix+'SB_Carrier__c']} | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Booking Status</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Booking_Status__c']"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Ticket No</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Ticket_No__c']"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Luggage Note</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Luggage_Note__c']"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Reservation Ref</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Reservation_Ref__c']"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">PNR Number</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_PBR_Number__c']"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3"/>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3"/>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">&nbsp;</label>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="convertMergeFields(itineraryTextTemplate[currentRt],items,currentRt);" >Compose</button>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="NotesText(true);">Refresh Notes</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>    
                                             
                                             </div>
                                            
                                            <!----- Transfer section -------------->
                                            <div ng-show="currentRt == 'Transfer'">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Supplier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-disabled="checkSupplierPayment(items)" ng-required="checkSupplierRequired()" ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off" typeahead-on-select="onSelectedCallback($item, $model, $label)" typeahead-input-formatter="globalFormateInputExtended($model, $label)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestSupplier |filter:{label:$viewValue} | limitTo:50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Transfer Option</label>
                                                                <div class="slds-form-element__control">
                                                                    <select id="transferOption" ng-change ="loadDescription('')"  class="slds-select" 
                                                                         ng-model="items[nameSpacePrefix+'SB_Transfer_Car_Hire_Option__c']"  ng-options="val.value as val.label for val in ItineraryDescription.lstOptions">
                                                                        <option value="" label="--Select--"></option>   
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">From Place</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-blur="loadItineraryDescription('WTD')" ng-model="items[nameSpacePrefix+'SB_From_Place__c']" typeahead-editable="true" typeahead-input-formatter="formatInputSB($model,items,'From')" 
                                                                        typeahead="state.label as state.label for state in getDataFrom(items.RecordTypeId) | filter:$viewValue | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Pick Up Details</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Pickup_Point__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">Booking Ref</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Booking_Ref__c']"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Arranged By</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input"  ng-model="items[nameSpacePrefix+'SB_Ground_Handler__c']" typeahead-input-formatter="globalFormateInput($model,autoSuggestSupplier)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestSupplier |filter:{label:$viewValue} | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3"/>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3"/>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">&nbsp;</label>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="convertMergeFields(itineraryTextTemplate[currentRt],items,currentRt);">Compose</button>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="NotesText(true);">Refresh Notes</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> 
                                            </div>
                                            
                                            <!----- Car Hire section -------------->
                                            <div ng-show="currentRt == 'Car Hire'">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Supplier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-disabled="checkSupplierPayment(items)" ng-required="checkSupplierRequired()" ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off" typeahead-on-select="onSelectedCallback($item, $model, $label)" typeahead-input-formatter="globalFormateInputExtended($model, $label)" 
                                                                        typeahead="state.value as state.label for state in getFilteredSuppliers($viewValue, items[nameSpacePrefix+'SB_Where_to_go__c']) | limitTo: 50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Transfer Option</label>
                                                                <div class="slds-form-element__control">
                                                                    <select id="transferOption" ng-blur="loadDescription('')"  class="slds-select" 
                                                                     ng-model="items[nameSpacePrefix+'SB_Transfer_Car_Hire_Option__c']"  ng-options="val.value as val.label for val in ItineraryDescription.lstOptions"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Pick Up Location</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Pickup_Point__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Pick Up Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" jqdatepicker="jqdatepicker" class="slds-input" ng-model="items[nameSpacePrefix+'SB_From_Date__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Pick Up Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_From_Time__c']" typeahead-editable="false" typeahead-input-formatter="formatInputTime($model)" 
                                                    typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Drop Off Location</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Drop_off_Point__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Drop Off Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" jqdatepicker="jqdatepicker" class="slds-input" ng-model="items[nameSpacePrefix+'SB_To_Date__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Drop Off Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_To_Time__c']" typeahead-editable="false" typeahead-input-formatter="formatInputTime($model)" 
                                                    typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Details</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Vehicle__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Provider</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Name__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Provider Telephone</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Provider_Telephone__c']" pattern-err-type="IB_PhoneInvalid" ng-pattern="/^[+#*\(\)\[\]]*([0-9][ ext+-pw#*\(\)\[\]]*){6,45}$/"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">&nbsp;</label>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="convertMergeFields(itineraryTextTemplate[currentRt],items,currentRt);">Compose</button>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="NotesText(true);">Refresh Notes</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> 
                                            </div>
                                            
                                            <!----- Days at Leisure -------------->
                                            <div ng-show="currentRt == 'Days at Leisure'">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Supplier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off" typeahead-on-select="onSelectedCallback($item, $model, $label)" typeahead-input-formatter="globalFormateInputExtended($model, $label)" 
                                                                        typeahead="state.value as state.label for state in getFilteredSuppliers($viewValue, items[nameSpacePrefix+'SB_Where_to_go__c']) | limitTo: 50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Where To Go</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-blur="loadItineraryDescription('WTG')" ng-model="items[nameSpacePrefix+'SB_Where_to_go__c']" typeahead-editable="true" typeahead-input-formatter="globalFormateInput($model,autoSuggestWTG)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestWTG | filter:$viewValue | limitTo:20"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">What To Do</label>
                                                                <div class="slds-form-element__control">
                                                                    <select id="transferOption" ng-blur ="loadDescription('WTD')"  class="slds-select" 
                                                                     ng-model="items[nameSpacePrefix+'SB_What_to_do__c']"  ng-options="val.value as val.label for val in ItineraryDescription.lstOptions"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                </div> 
                                            </div>
                                            
                                            <!----- Excursion -------------->
                                            <div ng-show="currentRt == 'Excursion'">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Supplier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-disabled="checkSupplierPayment(items)" ng-required="checkSupplierRequired()" ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off"  typeahead-on-select="onSelectedCallback($item, $model, $label)" typeahead-input-formatter="globalFormateInputExtended($model, $label)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestSupplier |filter:{label:$viewValue} | limitTo:50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">What To Do</label>
                                                                <div class="slds-form-element__control">
                                                                    <select id="transferOption" ng-blur="loadDescription('WTD')"  class="slds-select" 
                                                                         ng-model="items[nameSpacePrefix+'SB_What_to_do__c']"  ng-options="val.value as val.label for val in ItineraryDescription.lstOptions">
                                                                         <option value="" label="--Select--"></option>   
                                                                    </select> 
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Excursion</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Name__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Pick Up Location</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Pickup_Point__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                    </div>
                                                </div>        
                                            </div>
                                            <!----- Rail section -------------->
                                            <div ng-show="currentRt == 'Rail'">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Supplier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-disabled="checkSupplierPayment(items)" ng-required="checkSupplierRequired()"  ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off" typeahead-on-select="onSelectedCallback($item, $model, $label)" typeahead-input-formatter="globalFormateInputExtended($model, $label)"  
                                                                        typeahead="state.value as state.label for state in getFilteredSuppliers($viewValue, items[nameSpacePrefix+'SB_Where_to_go__c']) | limitTo: 50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Name</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Name__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">From Station</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_From_Station__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">To Station</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" id="transferOption" class="slds-input" ng-model="items[nameSpacePrefix+'SB_To_Station__c']"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">From Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" jqdatepicker="jqdatepicker" ng-model="items[nameSpacePrefix+'SB_From_Date__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">From Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_From_Time__c']" typeahead-editable="false" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">To Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" jqdatepicker="jqdatepicker" ng-model="items[nameSpacePrefix+'SB_To_Date__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">To Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_To_Time__c']" typeahead-editable="false" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5"/>  
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Class</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Class__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">&nbsp;</label>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="convertMergeFields(itineraryTextTemplate[currentRt],items,currentRt);">Compose</button>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="NotesText(true);">Refresh Notes</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> 
                                            </div>
                                            <!----- Cruise ------------>
                                            <div ng-show="currentRt == 'Cruise'">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Supplier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-disabled="checkSupplierPayment(items)" ng-required="checkSupplierRequired()" ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off" typeahead-on-select="onSelectedCallback($item, $model, $label)" typeahead-input-formatter="globalFormateInputExtended($model, $label)" 
                                                                        typeahead="state.value as state.label for state in getFilteredSuppliers($viewValue, items[nameSpacePrefix+'SB_Where_to_go__c']) | limitTo: 50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Name</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Name__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">From</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_From_Station__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">To</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" id="transferOption" class="slds-input" ng-model="items[nameSpacePrefix+'SB_To_Station__c']"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">From Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" jqdatepicker="jqdatepicker" ng-model="items[nameSpacePrefix+'SB_From_Date__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">From Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_From_Time__c']" typeahead-editable="false" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">To Date</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" jqdatepicker="jqdatepicker" ng-model="items[nameSpacePrefix+'SB_To_Date__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">To Time</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_To_Time__c']" typeahead-editable="false" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5"/>  
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Class</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" ng-model="items[nameSpacePrefix+'SB_Class__c']" />    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">&nbsp;</label>
                                                                <button class="slds-button slds-button--brand"  onclick="return false;" ng-click="loadWidgetyDesc(items)">Widgety</button>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="convertMergeFields(itineraryTextTemplate[currentRt],items,currentRt);">Compose</button>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="NotesText(true);">Refresh Notes</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> 
                                            </div>
                                             <!----- Other-------------->
                                            <div ng-show="(currentRt == 'Credit Card' || currentRt == 'Complimentary' || currentRt == 'Bulk Cost' || currentRt == 'Commission In' || currentRt == 'Commission Out' || currentRt == 'Credit Memo')">
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Supplier</label>
                                                                <div class="slds-form-element__control">
                                                                    <input type="text" class="slds-input" typeahead-editable="false" ng-disabled="checkSupplierPayment(items)" ng-required="checkSupplierRequired()" ng-model="items[nameSpacePrefix+'SB_Supplier__c']" autocomplete="off"  typeahead-input-formatter="globalFormateInputExtended($model, $label)"  
                                                                        typeahead="state.value as state.label for state in getFilteredSuppliers($viewValue, items[nameSpacePrefix+'SB_Where_to_go__c']) | limitTo: 50" typeahead-template-url="typeahead-item.html"/>    
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                    </div>
                                                </div> 
                                            </div> 
                                            <div ng-show="checkOtherComponent(currentRt)">
                                                <div class="slds-grid slds-wrap">
                                                    <div ng-repeat="field in fieldSets[currentRt]" class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label">{{field.label}}</label>
                                                                <div class="slds-form-element__control">
                                                                    <input ng-if="(field.label != 'Transfer / Car Hire Option' && field.label != 'Phone No' && field.fieldPath != nameSpacePrefix+'SB_To_Time__c' && field.fieldPath != nameSpacePrefix+'SB_From_Time__c' && field.fieldPath != nameSpacePrefix+'SB_Supplier__c' && field.fieldPath != nameSpacePrefix+'SB_From_Place__c' && field.fieldPath != nameSpacePrefix+'SB_To_Place__c')" type="text" class="slds-input" ng-model="items[field.fieldPath]" />
                                                                    <input ng-if="field.label == 'Phone No'" type="text" class="slds-input" ng-model="items[field.fieldPath]" ng-pattern="/^[+#*\(\)\[\]]*([0-9][ ext+-pw#*\(\)\[\]]*){6,45}$/" />
                                                                    <input ng-if="field.fieldPath == nameSpacePrefix+'SB_Supplier__c'" typeahead-editable="false" ng-blur="loadItineraryDescription('Supplier')" type="text" class="slds-input" ng-model="items[field.fieldPath]" typeahead-input-formatter="globalFormateInput($model,autoSuggestSupplier)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestSupplier |filter:{label:$viewValue} | limitTo:50"/>            
                                                                    <input ng-if="field.fieldPath == nameSpacePrefix+'SB_From_Place__c'" type="text" class="slds-input"  ng-model="items[field.fieldPath]" typeahead-editable="true" typeahead-input-formatter="formatInputSB($model,items,'From')" 
                                                                        typeahead="state.label as state.label for state in getDataFrom(items.RecordTypeId) | filter:$viewValue | limitTo:50"/>
                                                                    <input ng-if="field.fieldPath == nameSpacePrefix+'SB_To_Place__c'" type="text" class="slds-input"  ng-model="items[field.fieldPath]" typeahead-editable="true" typeahead-input-formatter="formatInputSB($model,items,'To')" 
                                                                        typeahead="state.label as state.label for state in getDataFrom(items.RecordTypeId) | filter:$viewValue | limitTo:50"/>
                                                                    <input ng-if="field.fieldPath == nameSpacePrefix+'SB_From_Time__c'" typeahead-editable="false" type="text" class="slds-input" ng-model="items[field.fieldPath]" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5" />
                                                                    <input ng-if="field.fieldPath == nameSpacePrefix+'SB_To_Time__c'" typeahead-editable="false" type="text" class="slds-input" ng-model="items[field.fieldPath]" typeahead-input-formatter="formatInputTime($model)" 
                                                                        typeahead="state.value as state.label for state in autoSuggestTime | filter:$viewValue | limitTo:5"/>
                                                                    <input ng-if="field.label == 'Transfer / Car Hire Option'" typeahead-editable="true" type="text" class="slds-input" ng-Keyup="typeHeadAjax(items[field.fieldPath])" ng-model="items[field.fieldPath]" typeahead-input-formatter="globalFormateInput($model,TypeAheadData)" 
                                                                        typeahead="state.value as state.label for state in TypeAheadData | filter:$viewValue | limitTo:5"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-repeat="field in range(3-(fieldSets[currentRt].length%2))" class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                    </div>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="inputNameSample1">&nbsp;</label>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="convertMergeFields(itineraryTextTemplate[currentRt],items,currentRt);">Compose</button>
                                                                <button class="slds-button slds-button--brand" onclick="return false;" ng-click="NotesText(true);">Refresh Notes</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                            
                                            <div ng-show="(  currentRt != 'Credit Card' && currentRt != 'Complimentary' && currentRt != 'Bulk Cost' && currentRt != 'Credit Memo' && currentRt != 'Commission In' && currentRt != 'Commission Out')" class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--3-of-3 slds-large-size--3-of-3">
                                                <div class="slds-form-element">
                                                    <label class="slds-form-element__label" for="inputNameSample1">Itinerary Description</label>
                                                    <textarea data-ck-editor="data-ck-editor" id="editor" class="ckedit" style=" height: 70px ;" richText="false" ng-model="items[nameSpacePrefix+'SB_Itinerary_Description__c']" />
                                                </div>
                                                <br/>
                                                <div class="slds-form-element">
                                                    <label class="slds-form-element__label slds-m-bottom--x-small" for="invoiceNotes">Invoice Notes</label>
                                                    <div class="slds-form-element__control">
                                                        <textarea id="invoiceNotes" class="slds-size--1-of-1 slds-input" style=" height: 40px ; " richText="false" ng-model="items[nameSpacePrefix+'SB_Invoice_Notes__c']" />
                                                    </div>
                                                </div>
                                                <br/>
                                                <div class="slds-form-element">
                                                    <label class="slds-form-element__label slds-m-bottom--x-small" for="supplierNotes">Supplier Notes</label>
                                                    <div class="slds-form-element__control">
                                                        <textarea id="supplierNotes" class="slds-size--1-of-1 slds-input" style=" height: 40px ; " richText="false" ng-model="items[nameSpacePrefix+'SB_Supplier_Notes__c']" />
                                                    </div>
                                                </div>
                                                
                                                
                                                
                                                <div class="slds-grid slds-wrap"  ng-show="(currentRt != 'Accommodation' && currentRt != 'Light Aircraft' && currentRt != 'Dom Flights' && currentRt != 'Int Flight')">
                                                    <!--
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        
                                                        <label class="slds-radio" ng-show="items.SB_Supplier__c != '' && items.SB_Supplier__c !== undefined">
                                                            <input type="radio" name="parent" ng-model="selectedParent" value="{{items.SB_Supplier__c}}"/>
                                                            <span class="slds-radio--faux"></span>
                                                            <span class="slds-form-element__label">{{globalFormateInput(items.SB_Supplier__c,autoSuggestSupplier)}}</span>
                                                        </label>
                                                        <label class="slds-radio" ng-show="items.SB_Where_to_go__c != '' && items.SB_Where_to_go__c !== undefined">
                                                            <input type="radio" name="parent" ng-model="selectedParent" value="{{items.SB_Where_to_go__c}}"/>
                                                            <span class="slds-radio--faux"></span>
                                                            <span class="slds-form-element__label">{{globalFormateInput(items.SB_Where_to_go__c,autoSuggestWTG)}}</span>
                                                        </label>
                                                        <label class="slds-radio" ng-show="items.SB_What_to_do__c != '' && items.SB_What_to_do__c !== undefined">
                                                            <input type="radio" name="parent" ng-model="selectedParent" value="{{items.SB_What_to_do__c}}"/>
                                                            <span class="slds-radio--faux"></span>
                                                            <span class="slds-form-element__label">{{globalFormateInput(items.SB_What_to_do__c,ItineraryDescription.lstOptions)}}</span>
                                                        </label>
                                                        <label class="slds-radio" ng-show="(items.SB_Where_to_go__c  == '' || items.SB_Where_to_go__c == undefined) && items.SB_From_Place__c !== undefined && items.SB_From_Place__c != '' && globalFormateInput(items.SB_From_Place__c,pickList['sb_departure_airport__c']) != ''">
                                                            <input type="radio" name="parent" ng-model="selectedParent" value="{{items.SB_From_Place__c}}"/>
                                                            <span class="slds-radio--faux"></span>
                                                            <span class="slds-form-element__label">{{items.SB_From_Place__c}} [Transfer Option]</span>
                                                        </label>
                                                    </div>
                                                    -->
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--2-of-2 slds-large-size--2-of-3"/>
                                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                        <div class="slds-form--horizontal">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" for="supplier">Holiday Type</label>
                                                                <div class="slds-form-element__control">
                                                                    <select id="HolidayType" class="slds-select" ng-model="selectedHT" ng-options="val.value as val.label for val in holidayType">
                                                                        <option value="">-- Select --</option>
                                                                    </select>    
                                                                    <button class="slds-button slds-button--brand" ng-disabled="items[nameSpacePrefix+'SB_Itinerary_Description__c'] === undefined || items[nameSpacePrefix+'SB_Itinerary_Description__c'] == ''"  ng-click="showSaveTemplate()" style="font-size: 11px;float:right;margin-top:2px;">Save As Template</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                            
                                            <!-- Supplier Cost -->
                                            <div ng-show="(currentRt  != 'Own arrangement' && currentRt != 'Days at Leisure' && currentRt != 'Notes' && currentRt != 'Description' && !items[nameSpacePrefix+'SB_Own_Arrangement__c'])" class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--3-of-3 slds-large-size--3-of-3">
                                                <br/>
                                                <div ng-repeat="clientGroup in supplierCosts">
                                                    <div class="slds-form-element slds-col">
                                                        <div class="slds-card">
                                                            <div class="slds-card__header slds-grid">
                                                                <div class="slds-media slds-media--center slds-has-flexi-truncate">
                                                                    <div class="slds-media__figure">
                                                                        <svg aria-hidden="true" class="slds-icon slds-icon-standard-contact slds-icon--small">
                                                                           <use xlink:href="{!URLFOR($Resource.SLDS012, '/assets/icons/standard-sprite/svg/symbols.svg#contact')}"></use> 
                                                                        </svg>
                                                                    </div>
                                                                    <div class="slds-media__body">
                                                                        <h2 class="slds-truncate" style="float:left;">
                                                                            <div class="slds-form--horizontal" style="width:100%;">
                                                                                <div class="slds-form-element">
                                                                                    <label class="slds-form-element__label" for="supplier">Client Group &nbsp;</label>
                                                                                    
                                                                                        <select id="selectedClient" ng-required="checkClientGroup(clientGroup)" class="slds-select" ng-model="clientGroup.selectedClient" ng-change="changeClientGroup(clientGroup)" ng-options="record.value as record.label for record in clientGroup.lstClients" style="width: auto;">
                                                                                            <option value="" label="--Select--"></option>
                                                                                        </select>    
                                                                                    
                                                                                </div>
                                                                            </div> 
                                                                        </h2>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-media slds-media--center slds-has-flexi-truncate">
                                                                    <span ng-show="clientGroup.selectedClient !== undefined && clientGroup.selectedClient != null && clientGroup.selectedClient != ''">Total Group Members - {{supplierCosts[0].mapClientGroup[clientGroup.selectedClient][nameSpacePrefix+'CG_Total_Group_Members__c']}}</span>       
                                                                </div>
                                                            </div>
                                                            <div class="slds-card__body">
                                                                <div class="slds-scrollable--x">
                                                                    <table class="itinerary slds-table slds-table--bordered" style="font-size: 11px !important;">
                                                                        <thead>
                                                                            <tr> 
                                                                                <th colspan="1" class="headerRow">Option</th>
                                                                                <th colspan="1" class="headerRow">Currency</th>
                                                                                <th colspan="1" class="headerRow">Occupancy Type</th>
                                                                                <th colspan="1" class="headerRow">Occupancy No</th>
                                                                                <th colspan="1" class="headerRow">Type</th>
                                                                                <th colspan="1" class="headerRow" ng-show="currentRt == 'Accommodation'">Shared Cost Per Night</th>
                                                                                <th colspan="1" class="headerRow" ng-show="currentRt == 'Accommodation'">Night</th>
                                                                                <th colspan="1" class="headerRow">Total Net Cost PP</th>
                                                                                <th colspan="1" class="headerRow">Total Client Group Cost</th>
                                                                                <th colspan="1" class="headerRow" ng-show="checkFlightsComponent(currentRt)">Margin Type</th>
                                                                                <th colspan="1" class="headerRow">Mark-up</th>
                                                                                <th colspan="1" class="headerRow">Notes</th>
                                                                                <th colspan="1" class="headerRow">Selected</th>
                                                                                <th colspan="1" class="headerRow">Action</th>
                                                                            </tr>     
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr  ng-repeat="cost in clientGroup.lstSupplierCost">
                                                                                <td>
                                                                                    <select id="SC-Option" class="slds-select" ng-model="cost[nameSpacePrefix+'SC_Option__c']" ng-options="record.value as record.label for record in pickList[nameSpacePrefix+'sc_option__c']">
                                                                                        <!--<option ng-repeat="val in pickList['sc_option__c']" ng-selected="cost.SC_Option__c==val.value" ng-value="val.value">{{val.label}}</option> -->
                                                                                        <option value="" label="--Select--"></option>
                                                                                    </select>     
                                                                                </td>
                                                                                <td>
                                                                                    <select id="SC-Option" class="slds-select" style="min-width: 100px;" ng-required="cost[nameSpacePrefix+'SC_Total_Client_Group_Cost__c'] !== undefined"  ng-model="cost.CurrencyIsoCode" ng-options="record.value as record.label for record in pickList['currencyisocode']">
                                                                                        <!--<option ng-repeat="val in pickList['currencyisocode']" ng-selected="cost.CurrencyIsoCode==val.value" ng-value="val.value">{{val.label}}</option> -->
                                                                                        <option value="" label="--Select--"></option>
                                                                                    </select>  
                                                                                </td>
                                                                                <td>
                                                                                    <select id="SC-Option" class="slds-select"  ng-change="changeOccType(clientGroup.selectedClient,cost)"  ng-model="cost[nameSpacePrefix+'SC_Occupancy_Type__c']" ng-options="record.value as record.label for record in pickList[nameSpacePrefix+'sc_occupancy_type__c']">
                                                                                        <!--<option ng-repeat="val in pickList['sc_occupancy_type__c']" ng-selected="cost.SC_Occupancy_Type__c==val.value" ng-value="val.value">{{val.label}}</option> -->
                                                                                        <option value="" label="--Select--"></option>
                                                                                    </select>  
                                                                                </td>
                                                                                <td>
                                                                                    <input type="number" step="1" min="1" ng-max="checkMax(clientGroup.selectedClient,cost)" id="OccNO"  ng-change="changeCost(cost,'Type')" class="slds-input" ng-model="cost[nameSpacePrefix+'SC_Occupancy_No__c']" style="width: 54px;  padding-right: 0px;"/>
                                                                                    <!--<select id="SC-Option" class="slds-select" ng-change="changeCost(cost,'Type')" ng-model="cost.SC_Occupancy_No__c" ng-options="record.value as record.label for record in pickList['sc_occupancy_no__c']">
                                                                                        <option ng-repeat="val in pickList['sc_occupancy_no__c']" ng-selected="cost.SC_Occupancy_No__c==val.value" ng-value="val.value">{{val.label}}</option> 
                                                                                        <option value="" label="--Select--"></option>
                                                                                    </select>  -->
                                                                                </td>
                                                                                <td>
                                                                                    <select id="SC-Option" class="slds-select" style="min-width: 80px;" ng-model="cost[nameSpacePrefix+'SC_Type__c']" ng-required="checkRequiredType(cost)" ng-options="record.value as record.label for record in pickList[nameSpacePrefix+'sc_type__c']">
                                                                                        <!--<option ng-repeat="val in pickList['sc_type__c']" ng-selected="cost.SC_Type__c==val.value" ng-value="val.value">{{val.label}}</option> -->
                                                                                        <option value="" label="--Select--"></option>
                                                                                    </select>  
                                                                                </td>
                                                                                <td ng-show="currentRt == 'Accommodation'">
                                                                                    <input type="number" style="padding-right: 0px;" step=".01" id="sharedCostPerNight"  ng-change="changeCost(cost,'Acc');" class="slds-input" ng-model="cost[nameSpacePrefix+'SC_Shared_Cost_Per_Night__c']" />
                                                                                </td>
                                                                                <td ng-show="currentRt == 'Accommodation'">
                                                                                    <input type="number" style="padding-right: 0px;min-width: 40px;" step="1" id="nights" ng-change="changeCost(cost,'Acc')" class="slds-input" ng-model="cost[nameSpacePrefix+'SC_Nights__c']" />
                                                                                </td>
                                                                                <td>
                                                                                    <input type="number" style="padding-right: 0px;" step=".01" id="TotalNetCost" ng-disabled="cost[nameSpacePrefix+'SC_Type__c'] === undefined || cost[nameSpacePrefix+'SC_Type__c'] == ''" ng-readonly="currentRt == 'Accommodation' || cost['{!nameSpacePrefix}SC_Type__c'] == 'Shared'"  ng-change="changeCost(cost,'PP')" class="slds-input" ng-model="cost[nameSpacePrefix+'SC_Total_Net_Cost_PP__c']" />
                                                                                </td>
                                                                                <td>
                                                                                    <input type="number" style="padding-right: 0px;" step=".01"  id="ClientGroupCost" ng-disabled="cost[nameSpacePrefix+'SC_Type__c'] === undefined || cost[nameSpacePrefix+'SC_Type__c'] == ''" ng-readonly="currentRt == 'Accommodation' || cost[nameSpacePrefix+'SC_Type__c'] != 'Shared'" ng-change="changeCost(cost,'Total')" class="slds-input" ng-model="cost[nameSpacePrefix+'SC_Total_Client_Group_Cost__c']" />
                                                                                </td>
                                                                                <td ng-show="checkFlightsComponent(currentRt)">
                                                                                    <select id="SC-Option" class="slds-select" ng-disabled="((checkFlightsComponent(currentRt)) && !opp[nameSpacePrefix+'O_Include_Flight_Margin__c'])" style="min-width: 84px;" ng-model="cost[nameSpacePrefix+'SC_Margin_Type__c']" ng-options="record.value as record.label for record in pickList[nameSpacePrefix+'sc_margin_type__c']">
                                                                                        <option value="" label="--Select--"></option>
                                                                                    </select> 
                                                                                </td>
                                                                                <td>
                                                                                    <input type="number" ng-disabled="((checkFlightsComponent(currentRt)) && !opp[nameSpacePrefix+'O_Include_Flight_Margin__c'])" ng-show="(cost[nameSpacePrefix+'SC_Margin_Type__c'] == 'Percentage' || !checkFlightsComponent(currentRt))" step=".01" min="0" id="Margin" class="slds-input" ng-model="cost[nameSpacePrefix+'SC_Margin__c']" style="width: 55px;padding-right: 0px;"/>
                                                                                    <input type="number" ng-disabled="((checkFlightsComponent(currentRt))  && !opp[nameSpacePrefix+'O_Include_Flight_Margin__c'])" ng-show="cost[nameSpacePrefix+'SC_Margin_Type__c']=='Value'" step=".01" min="0" id="Margin" class="slds-input"  ng-model="cost[nameSpacePrefix+'SC_Margin_Value__c']" style="width: 55px;padding-right: 0px;"/>
                                                                                </td>
                                                                                <td>
                                                                                    <textarea  class="slds-input" ng-model="cost[nameSpacePrefix+'SC_Description__c']" style="height: 30px;"/>
                                                                                </td>
                                                                                <td style="text-align: center;">
                                                                                    <label class="slds-checkbox">
                                                                                        <input name="Selected{{$index}}" ng-change="validateCostOption(clientGroup)" type="checkbox" id="selected" ng-model="cost[nameSpacePrefix+'SC_Selected__c']"/>
                                                                                        <span class="slds-checkbox--faux chk{{clientGroup.selectedClient}}"></span>
                                                                                        <span class="slds-form-element__label"></span>
                                                                                    </label>
                                                                                </td>
                                                                                <td style="text-align: center;cursor: pointer;">
                                                                                    <Strong style="color:red" ng-click="deleteCost(cost,$index,clientGroup.lstSupplierCost)">X</Strong>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                                
                                                            </div>
                                                            <div class="slds-card__footer">
                                                                <button class="slds-button slds-button--brand" ng-disabled="!(clientGroup.selectedClient !== undefined && clientGroup.selectedClient != null && clientGroup.selectedClient != '')" onclick="return false;" ng-click="addCost(clientGroup);">Add Cost</button>                
                                                                <button class="slds-button slds-button--brand" ng-show="clientGroup.lstClients !== undefined && clientGroup.lstClients.length >1 " onclick="return false;" ng-click="addClientGroup();">Add Client Group</button>                
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                             
                                            <div class="slds-form-element slds-col" ng-show="(currentRt.indexOf('Flight')!= -1 || currentRt=='Car Hire')" >
                                                <div class="slds-card" ng-repeat="cg in flightMembers">
                                                    <div class="slds-card__header slds-grid">
                                                        <div class="slds-media slds-media--center slds-has-flexi-truncate">
                                                            <div class="slds-media__figure">
                                                                <svg aria-hidden="true" class="slds-icon slds-icon-standard-contact slds-icon--small">
                                                                   <use xlink:href="{!URLFOR($Resource.SLDS012, '/assets/icons/standard-sprite/svg/symbols.svg#contact')}"></use> 
                                                                </svg>
                                                                &nbsp;{{clientGroupName($index)}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-media__body">
                                                        <div class="slds-scrollable--x">
                                                            <table class="slds-table slds-table--bordered" style="font-size: 11px !important;">
                                                                <thead>
                                                                    <tr> 
                                                                        <th colspan="1" class="headerRow" style="min-width:200px;max-width:400px;">Member Name</th>
                                                                        <th colspan="1" class="headerRow">Is Lead</th>
                                                                        <th colspan="1" class="headerRow">Seat No.</th>
                                                                        <th colspan="1" class="headerRow">Select</th>
                                                                    </tr>     
                                                                </thead>
                                                                <tbody>
                                                                    <tr  ng-repeat="gm in cg |  orderBy :'IsLead' : !reverse">
                                                                        <td>
                                                                            {{gm.Name}}
                                                                        </td>
                                                                        <td>
                                                                            <label class="slds-checkbox">
                                                                                <input name="Selected{{$index}}" ng-disabled="true" type="checkbox" id="selected" ng-model="gm.IsLead"/>
                                                                                <span class="slds-checkbox--faux chkIsLead{{gm.Id}}" style="background: #1A9AD6;"></span>
                                                                                <span class="slds-form-element__label"></span>
                                                                            </label>     
                                                                        </td>
                                                                        <td>
                                                                            <input type="text" style="width:70%" class="slds-input" ng-model="gm.fb['{!nameSpacePrefix}FB_Seat_No__c']" id='seatNo' />
                                                                        </td>
                                                                        <td>
                                                                            <label class="slds-checkbox">
                                                                                <input name="Selected{{$index}}"  type="checkbox" id="selected" ng-model="gm.IsSelected"/>
                                                                                <span class="slds-checkbox--faux chkIsLead{{gm.Id}}" ></span>
                                                                                <span class="slds-form-element__label"></span>
                                                                            </label>    
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                        </div>
                                        <div class="slds-modal__footer slds-modal__footer">
                                            <div class="slds-x-small-buttons--horizontal">
                                                <button type="submit" class="slds-button slds-button--brand" ng-disabled="!(validateCostOption())" ng-click="savePopupSB(items)" onclick="return false;">Save &amp; Close</button>
                                                <button class="closeButton slds-button slds-button--brand" onclick="return false;">Close</button>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </form>
                            <div style="display:none;" class="accountAddrees slds-backdrop slds-backdrop--open"></div>
                        </div>
                        <!--- Supplier Booking Popup Cloased-->
                        
                        <!---- Group Members Popup ---->
                        <div aria-hidden="false" role="dialog" style="display:none"  class="groupMembers slds-modal slds-modal--large slds-fade-in-open">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header" style="padding: 10px 16px;">
                                    <h2 class="slds-text-heading--medium" style="float:left;font-size:17px;"><a><h1>Group Members</h1></a> Client Groups - [<span ng-repeat="record in clientGroups">{{$index+1}}. {{record.label}} &nbsp;</span>]</h2>
                                    
                                    <button class="slds-button slds-button--icon-inverse slds-modal__close" onclick="return false;">
                                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                            <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                </div>
                                
                                <div class="slds-modal__content slds-scrollable--x" style="overflow-y : auto !important">
                                    <div class="slds-form-element slds-col" ng-form="gmForm">
                                        <table class="slds-table slds-table--bordered" style="font-size: 11px !important;">
                                            <thead>
                                                <tr> 
                                                    <th colspan="1" class="headerRow">Group Members</th>
                                                    <th colspan="1" class="headerRow">Occupancy Type</th>
                                                    <th colspan="1" class="headerRow">DOB</th>
                                                    <th colspan="1" class="headerRow">Lead</th>
                                                    <th colspan="1" class="headerRow">Client Group</th>
                                                    <th colspan="1" class="headerRow">Action</th>
                                                </tr>     
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="gm in opp[nameSpacePrefix+'Group_Members__r'].records|  orderBy:'{!nameSpacePrefix}GM_Lead_Passenger__c':!reverse"> 
                                                    <td>
                                                        {{gm[nameSpacePrefix+'GM_Name__c']}}
                                                    </td>
                                                    <td>
                                                        {{gm[nameSpacePrefix+'GM_Contact__r'][nameSpacePrefix+'Occupancy_Type__c']}}
                                                    </td>
                                                    <td>
                                                        {{gm[nameSpacePrefix+'GM_Contact__r'].Birthdate | date:'MM/dd/yyyy'}}
                                                    </td>
                                                    <td>
                                                        <label class="slds-checkbox">
                                                            <input name="gm{{$index}}" disabled="disabled" type="checkbox" id="groupMember{{$index}}" ng-model="gm[nameSpacePrefix+'GM_Lead_Passenger__c']"/>
                                                            <span class="slds-checkbox--faux" style="background: rgba(0, 79, 160, 0.72);"></span>
                                                            <span class="slds-form-element__label"></span>
                                                        </label>
                                                    </td>
                                                    <td>
                                                        <select ng-model="gm[nameSpacePrefix+'GM_Client_Group__c']" ng-required="true" ng-disabled="gm[nameSpacePrefix+'GM_Lead_Passenger__c']" class="slds-input" ng-options="record.value as record.label for record in clientGroups">
                                                            <option value="" label="-- Select --"></option>
                                                        </select>    
                                                    </td>
                                                    <td data-label="Action">
                                                        <a href="#" ng-click="showAddressContactModal(gm[nameSpacePrefix+'GM_Contact__c']);"> More </a>
                                                    </td>
                                                </tr> 
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                
                                <div class="slds-modal__footer slds-modal__footer">
                                    <div class="slds-x-small-buttons--horizontal">
                                        <button class="slds-button slds-button--brand" ng-disabled="gmForm.$invalid" ng-click="saveClientGroup()" onclick="return false;">Save &amp; Close</button>
                                        <button class="closeButton slds-button slds-button--brand" onclick="return false;">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="display:none;" class="groupMembers slds-backdrop slds-backdrop--open"></div>
                        
                        <!---- Changes Dates ---->
                        <div aria-hidden="false" role="dialog" style="display:none"  class="changeDates slds-modal slds-modal--large slds-fade-in-open">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header" style="padding: 10px 16px;">
                                    <h2 class="slds-text-heading--medium" style="float:left;font-size:17px;"><a><h1>Change Dates</h1></a></h2>
                                    
                                    <button class="slds-button slds-button--icon-inverse slds-modal__close" onclick="return false;">
                                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                            <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                </div>
                                
                                <div class="slds-modal__content slds-scrollable--x" style="overflow-y : auto !important">
                                    <div class="slds-form-element slds-col" ng-form="dateForm">
                                        <span>You will not be able to reduce the total number of days for this holiday.</span>
                                        <div class="slds-grid slds-wrap">
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <div class="slds-form--horizontal">
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label" for="inputNameSample1">Departure Date</label>
                                                        <div class="slds-form-element__control">
                                                            <input type="text" jqdatepicker1="jqdatepicker1" class="slds-input"  ng-model="CopyForDates[nameSpacePrefix+'O_Departure_Date__c']" ng-change="fillReturnDate('departure')"/>    
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> 
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <div class="slds-form--horizontal">
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label" for="inputNameSample1">Nights</label>
                                                        <div class="slds-form-element__control">
                                                            <input type="number" step="1" class="slds-input" min="{{CopyForDates[nameSpacePrefix+'O_No_of_Nights__c']}}" ng-change="fillReturnDate('night')"  ng-model="nightsDates" style="padding-right:0px;"/>        
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> 
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <div class="slds-form--horizontal">
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label" for="inputNameSample1">Return Date</label>
                                                        <div class="slds-form-element__control">
                                                            <input type="text" jqdatepicker1="jqdatepicker1" class="slds-input"  ng-model="CopyForDates[nameSpacePrefix+'O_Return_Date__c']" ng-change="fillReturnDate('return')"/>    
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>       
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                            </div>       
                                        </div>       
                                        
                                    </div>
                                </div>
                                
                                <div class="slds-modal__footer slds-modal__footer">
                                    <div class="slds-x-small-buttons--horizontal">
                                        <button class="slds-button slds-button--brand" ng-disabled="dateForm.$invalid" ng-click="changeDates()" onclick="return false;">Save &amp; Close</button>
                                        <button class="closeButton slds-button slds-button--brand" onclick="return false;">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="display:none;" class="changeDates slds-backdrop slds-backdrop--open"></div>
                        
                         
                         
                         <!-- Save AS Template Popup ---->
                         <div class="saveAsTemplate" style="display: none;">
                            <div aria-hidden="false" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-open" style="z-index:1111111">
                                <div class="slds-modal__container slds-modal--prompt">
                                    <div class="slds-modal__header slds-modal__header slds-theme--success">
                                        <h2 class="slds-text-heading--small">Please select a relevant record.</h2>
                                        <button class="slds-button slds-button--icon-inverse slds-modal__close">
                                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--medium">
                                            <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Close</span>
                                        </button>
                                    </div>
                                    <div class="slds-modal__content"> 
                                        <div class="slds-form-element slds-col slds-size--1-of-1">
                                            <label class="slds-radio" ng-show="items[nameSpacePrefix+'SB_Supplier__c'] != '' && items[nameSpacePrefix+'SB_Supplier__c'] !== undefined">
                                                <input type="radio" name="parent" ng-model="selectedParent" value="{{items[nameSpacePrefix+'SB_Supplier__c']}}"/>
                                                <span class="slds-radio--faux"></span>
                                                <span class="slds-form-element__label">{{globalFormateInput(items[nameSpacePrefix+'SB_Supplier__c'],autoSuggestSupplier)}}</span>
                                            </label>
                                            <label class="slds-radio" ng-show="items[nameSpacePrefix+'SB_Where_to_go__c'] != null && items[nameSpacePrefix+'SB_Where_to_go__c'] != '' && items[nameSpacePrefix+'SB_Where_to_go__c'] !== undefined">
                                                <input type="radio" name="parent" ng-model="selectedParent" value="{{items[nameSpacePrefix+'SB_Where_to_go__c']}}"/>
                                                <span class="slds-radio--faux"></span>
                                                <span class="slds-form-element__label">{{globalFormateInput(items[nameSpacePrefix+'SB_Where_to_go__c'],autoSuggestWTG)}}</span>
                                            </label>
                                            <label class="slds-radio" ng-show="items[nameSpacePrefix+'SB_Where_to_go__c'] != null && items[nameSpacePrefix+'SB_What_to_do__c'] != '' && items[nameSpacePrefix+'SB_What_to_do__c'] !== undefined">
                                                <input type="radio" name="parent" ng-model="selectedParent" value="{{items[nameSpacePrefix+'SB_What_to_do__c']}}"/>
                                                <span class="slds-radio--faux"></span>
                                                <span class="slds-form-element__label">{{globalFormateInput(items[nameSpacePrefix+'SB_What_to_do__c'],ItineraryDescription.lstOptions)}}</span>
                                            </label>
                                            <label class="slds-radio" ng-show="(items[nameSpacePrefix+'SB_Where_to_go__c']  == '' || items[nameSpacePrefix+'SB_Where_to_go__c'] == undefined) && items[nameSpacePrefix+'SB_From_Place__c'] !== undefined && items[nameSpacePrefix+'SB_From_Place__c'] != '' && globalFormateInputLabel(items[nameSpacePrefix+'SB_From_Place__c'],autoSuggestAirport) != ''">
                                                <input type="radio" name="parent" ng-model="selectedParent" value="{{items[nameSpacePrefix+'SB_Departure_Airport_l__c']}}"/>
                                                <span class="slds-radio--faux"></span>
                                                <span class="slds-form-element__label">{{items[nameSpacePrefix+'SB_From_Place__c']}} [Transfer Option]</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="slds-modal__footer slds-theme--default">
                                        <div class="slds-x-small-buttons--horizontal">
                                            <button ng-click="saveAsTemplate();" class="slds-button slds-button--brand">Save</button>
                                            <button onclick="$('.saveAsTemplate').hide();" class="slds-button slds-button--brand">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-backdrop slds-backdrop--open" style="z-index:1111110"></div>
                        </div>           
                        
                        
                        <!--- Flush Component Values -->
                        
                         <div class="changeComponent" style="display: none;">
                            <div aria-hidden="false" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-open" style="z-index:1111111">
                                <div class="slds-modal__container slds-modal--prompt">
                                    <div class="slds-modal__header slds-modal__header slds-theme--success">
                                        <h2 class="slds-text-heading--small">Are you sure?</h2>
                                        <button class="slds-button slds-button--icon-inverse slds-modal__close">
                                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--medium">
                                            <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Close</span>
                                        </button>
                                    </div>
                                    <div class="slds-modal__content"> 
                                        Please select <strong>Flush</strong> if you want to flush old values of this supplier booking.    
                                    </div>
                                    <div class="slds-modal__footer slds-theme--default">
                                        <div class="slds-x-small-buttons--horizontal">
                                            <button ng-click="flushValues();" class="slds-button slds-button--brand">Flush</button>
                                            <button onclick="$('.changeComponent').hide();" class="slds-button slds-button--brand">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-backdrop slds-backdrop--open" style="z-index:1111110"></div>
                        </div> 
                        
                        <!-------Notes Popup------->
                        
                        
                        <div aria-hidden="false" role="dialog" style="display:none"  class="NotesPopup slds-modal slds-modal--large slds-fade-in-open">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header" style="padding: 10px 16px;">
                                    <h2 class="slds-text-heading--medium" style="float:left;font-size:17px;"><a><h1>Notes</h1></a></h2>
                                    
                                    <button class="slds-button slds-button--icon-inverse slds-modal__close" onclick="$('.NotesPopup').toggle('hide');return false;">
                                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                            <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                </div>
                                
                                <div class="slds-modal__content slds-scrollable--x" style="overflow-y : auto !important">
                                    <div class="slds-form-element slds-col">
                                        <div class="slds-grid slds-wrap">
                                            <div class="slds-form-element slds-col ">
                                                <div class="">
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label "  for="bookingNotes">Booking Note (Internal)</label>
                                                        <div class="slds-form-element__control slds-size--1-of-1">
                                                            <textarea id="bookingNotes" class="slds-input" style=" height: 40px ; " richText="false" ng-model="opp[nameSpacePrefix+'O_Booking_Note_Internal__c']" />        
                                                        </div>
                                                    </div>
                                                </div>
                                             </div>
                                            <div class="slds-form-element slds-col slds-col slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1">
                                                <div class="">
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label" for="invoiceNotes">Other Invoice Comments</label>
                                                        <div class="slds-form-element__control">
                                                            <textarea id="invoiceNotes" class="slds-input" style=" height: 40px ; " richText="false" ng-model="opp[nameSpacePrefix+'O_Other_Invoice_Comments__c']"/>        
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> 
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1">
                                                <div >
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label" for="additionalReps">Additional Reps / Agents Arrival Report</label>
                                                        <div class="slds-form-element__control">
                                                            <textarea id="additionalReps" class="slds-input"  ng-model="opp[nameSpacePrefix+'O_Additional_Reps_Agents_Arrival_report__c']" />    
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>       
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                            </div>       
                                        </div>       
                                        
                                    </div>
                                </div>
                                
                                <div class="slds-modal__footer slds-modal__footer">
                                    <div class="slds-x-small-buttons--horizontal">
                                        <button class="slds-button slds-button--brand" ng-disabled="dateForm.$invalid" ng-click="saveNotes()" onclick="return false;">Save &amp; Close</button>
                                        <button class="closeButton slds-button slds-button--brand" onclick="$('.NotesPopup').toggle('hide');return false;">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="display:none;" class="NotesPopup slds-backdrop slds-backdrop--open"></div>
                        
                        
                        
                        
                        
                        
                        
                        <!-----Notes Popup Ends Here-------->
                        
                        <!-- Contact Popup ---->
                        <div aria-hidden="false" role="dialog" style="display:none;" class="contactAddress slds-modal slds-modal--large slds-fade-in-open" ng-form="frmContactAdd">
                            <div class="slds-modal__container">
                                <div class="slds-modal__header" style="padding: 10px 16px;">
                                    <h2 class="slds-text-heading--medium" style="float:left;font-size:17px;">Client Address<strong ng-show="addressContact.FirstName != undefined"> - {{addressContact.FirstName}} {{addressContact.LastName}}</strong></h2>
                                    <button class="slds-button slds-button--icon-inverse slds-modal__close" onclick="$('.contactAddress').toggle('hide');return false;">
                                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                            <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                        </svg>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                </div>
                                <div class="slds-modal__content slds-scrollable--y" style="height:450px;overflow:auto !important;">
                                    <div class="slds-grid slds-wrap">
                                      <div class="slds-col slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--2-of-3">
                                        <div class="slds-grid slds-wrap">
                                           <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="Preferedname">Prefered Name</label>
                                                <div class="slds-form-element__control">
                                                    <input id="Preferedname" ng-init="addressContact[nameSpacePrefix+'C_Prefered_Name__c'] =  addressContact[nameSpacePrefix+'C_Prefered_Name__c'] !== undefined ? addressContact[nameSpacePrefix+'C_Prefered_Name__c'] : addressContact.FirstName" class="slds-input" type="text" ng-model="addressContact[nameSpacePrefix+'C_Prefered_Name__c']"  />
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="Birthdate">Birthday</label>
                                                <div class="slds-form-element__control">
                                                    <input id="Birthdate" class="slds-input" type="text" jqdatepickerPast="jqdatepickerPast" ng-model="addressContact.Birthdate"  />
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="Language">Language</label>
                                                <div class="slds-form-element__control">
                                                    <select id="Language" class="slds-select" style="min-width: 75px;" ng-model="addressContact[nameSpacePrefix+'Languages__c']" ng-options="record.value as record.label for record in pickList[nameSpacePrefix+'languages__c']">
                                                        <option value="" label="--Select--"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample1">Mailing Address Line 1</label>
                                                <div class="slds-form-element__control">
                                                    <input id="address1" class="slds-input" type="text" ng-model="addressContact[nameSpacePrefix+'C_Address_Line_1__c']"  />
                                                </div>
                                            </div>
                                        
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample1">Mailing Address Line 2</label>
                                                <div class="slds-form-element__control">
                                                    <input id="address2" class="slds-input" type="text" ng-model="addressContact[nameSpacePrefix+'C_Address_Line_2__c']"  />
                                                </div>
                                            </div>
                                            
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample2">Mailing Address Line 3</label>
                                                <div class="slds-form-element__control">
                                                    <input id="address3" class="slds-input" type="text" ng-model="addressContact[nameSpacePrefix+'C_Address_Line_3__c']"  />
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample3">Town/City</label>
                                                <div class="slds-form-element__control">
                                                    <input id="city" class="slds-input" type="text" ng-model="addressContact.MailingCity" />
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample3">County</label>
                                                <div class="slds-form-element__control">
                                                    <input id="state" class="slds-input" type="text" ng-model="addressContact.MailingState" />
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample3">Country</label>
                                                <div class="slds-form-element__control">
                                                    <select id="Con_country"  class="slds-select" ng-model="addressContact.MailingCountry"  ng-options="record.value as record.label for record in lstCountries">
                                                        <option value="" label="-- Select --"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample3">Postcode</label>
                                                
                                                <div class="slds-form-element__control">
                                                    <input id="postCode" class="slds-input" type="text" maxlength="10"   ng-model="addressContact.MailingPostalCode" />
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3" >
                                                <label class="slds-form-element__label" for="inputNameSample3">Email</label>
                                                <div class="slds-form-element__control">
                                                    <input id="inputNameSample3" class="slds-input" type="email" ng-model="addressContact.Email" pattern-err-type="HE_EmailInvalid" ng-pattern="/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})$/"/>
                                
                                                 </div>
                                             </div>    
                                             <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample3">Phone</label>
                                                  <div class="slds-form-element__control">
                                                    <input id="phone" class="slds-input" type="text" pattern-err-type="HE_PhoneInvalid"  ng-pattern="/^\+?(\d+$)$/" ng-model="addressContact.Phone" />
                                                </div>
                                            </div>
                                             <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="HomePhone">Home Phone</label>
                                                <div class="slds-form-element__control">
                                                    <input id="HomePhone" class="slds-input" type="text" pattern-err-type="HE_PhoneInvalid" ng-pattern="/^\+?(\d+$)$/" ng-model="addressContact.HomePhone" />
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="inputNameSample3">Mobile Phone</label>
                                                <div class="slds-form-element__control">
                                                    <input id="MobilePhone" class="slds-input" type="text" pattern-err-type="HE_PhoneInvalid"  ng-pattern="/^\+?(\d+$)$/" ng-model="addressContact.MobilePhone" />
                                                </div>
                                            </div>
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                                <label class="slds-form-element__label" for="OtherPhone">Other Phone</label>
                                                <div class="slds-form-element__control">
                                                    <input id="OtherPhone" class="slds-input" type="text" pattern-err-type="HE_PhoneInvalid"  ng-pattern="/^\+?(\d+$)$/" ng-model="addressContact.OtherPhone" />
                                                </div>
                                            </div>
                                            
                                            <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--2-of-3" style=" margin-right: 3%;">
                                                <label class="slds-form-element__label" for="Description">Description</label>
                                                <div class="slds-form-element__control">
                                                    <textarea id="Description" class="slds-textarea" type="text" ng-model="addressContact.Description" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="slds-col slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-3">
                                        <div ng-if="addressContact.MailingPostalCode!= ''">
                                            <map id="{{(addressContact.Id != undefined ? addressContact.Id : 'newContactMap')}}" location="{{(addressContact.MailingPostalCode != undefined ? addressContact.MailingPostalCode : 'SW13')}}" title="{{addressContact.MailingCountry}}"/>
                                        </div>
                                    </div>
                                </div>
                             
                             <br/>
                              <br/>
                                         
                             <h3 class="slds-section-title--divider slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1" >Passport Details</h3>
                                <div class="slds-grid slds-wrap">
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                        <label class="slds-form-element__label" for="passportNo">Full Name on Passport</label>
                                        <div class="slds-form-element__control">
                                            <input id="fullNamePP" class="slds-input" type="text" ng-model="addressContact[nameSpacePrefix+'C_Full_Name_on_Passport__c']" />
                                        </div>
                                    </div> 
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                        <label class="slds-form-element__label" for="passportNo">Gender</label>
                                        <div class="slds-form-element__control">
                                            <select id="PP_Gender" class="slds-select" style="min-width: 75px;" ng-model="addressContact[nameSpacePrefix+'C_Gender__c']" ng-options="record.value as record.label for record in pickList[nameSpacePrefix+'c_gender__c']">
                                                <option value="" label="--Select--"></option>
                                            </select>
                                        </div>
                                    </div> 
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                        <label class="slds-form-element__label" for="passportNo">Place of Birth</label>
                                        <div class="slds-form-element__control">
                                            <input id="PP_PBirth" class="slds-input" type="text" ng-model="addressContact[nameSpacePrefix+'C_Place_of_Birth__c']" />
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                        <label class="slds-form-element__label" for="passportNo">Nationality</label>
                                        <div class="slds-form-element__control">
                                            <select id="PP_Nationality" class="slds-select" style="min-width: 75px;" ng-model="addressContact[nameSpacePrefix+'C_Nationality__c']" ng-options="record.value as record.label for record in pickList[nameSpacePrefix+'c_nationality__c']">
                                                <option value="" label="--Select--"></option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                        <label class="slds-form-element__label" for="passportNo">Passport Number</label>
                                        <div class="slds-form-element__control">
                                            <input id="PP_PNo" class="slds-input" type="text" ng-model="addressContact[nameSpacePrefix+'C_Passport_Number__c']" />
                                        </div>
                                    </div> 
                                    
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                        <label class="slds-form-element__label" for="passportNo">Issued Date</label>
                                        <div class="slds-form-element__control">
                                            <input id="PP_IssuedOn" class="slds-input" jqdatepickerpast="jqdatepickerpast" type="text" ng-model="addressContact[nameSpacePrefix+'C_Issued_Date__c']" />
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                        <label class="slds-form-element__label" for="passportNo">Expiry Date</label>
                                        <div class="slds-form-element__control">
                                            <input id="PP_Expiry" class="slds-input" type="text" jqdatepickerfuture="jqdatepickerfuture" ng-model="addressContact[nameSpacePrefix+'C_Expires_Date__c']" />
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3">
                                        <label class="slds-form-element__label" for="passportNo">Issued Place</label>
                                        <div class="slds-form-element__control">
                                            <select id="PP_IssuedPlace"  class="slds-select" ng-model="addressContact[nameSpacePrefix+'C_Issue_Place__c']"  ng-options="record.value as record.label for record in lstCountries">
                                                <option value="" label="-- Select --"></option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--1-of-2 slds-large-size--1-of-3"/>
                                    
                                </div>  
                                <br/>
                                
                                
                                <h3 class="slds-section-title--divider slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1" >Communication Preferences</h3>
                                
                                <div class="slds-scrollable--x slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1 " ng-show="addressContact[nameSpacePrefix+'Communication_Preferences__r'].totalSize>0">
                                    <table class="slds-table slds-table--bordered">
                                        <thead>
                                            <tr class="slds-text-heading--label">
                                                <th class="slds-is-sortable" scope="col">
                                                    <span class="slds-truncate">Type</span>
                                                    <button class="slds-button slds-button--icon-bare">
                                                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--small">
                                                            <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/standard-sprite/svg/symbols.svg#arrowdown')}"></use>
                                                        </svg>
                                                        <span class="slds-assistive-text">Sort</span>
                                                    </button>
                                                </th>
                                                <th scope="col">
                                                    <span class="slds-truncate">Opt In</span>
                                                </th>
                                                <th scope="col">
                                                    <span class="slds-truncate">Opt Out</span>
                                                </th>
                                                <th scope="col">
                                                    <span class="slds-truncate">Action</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="slds-hint-parent" ng-repeat="cp in addressContact[nameSpacePrefix+'Communication_Preferences__r'].records">
                                                <td data-label="Airline Membership Number" role="row">
                                                    <a href="/{{cp.Id}}" target="_blank" class="slds-truncate">{{cp[nameSpacePrefix+'CP_Type__c']}}</a>
                                                </td>
                                                
                                                <td data-label="Airline">
                                                    <span class="slds-truncate">{{cp[nameSpacePrefix+'CP_Opt_in__c']}}</span>
                                                </td>
                                                <td data-label="Airline">
                                                    <span class="slds-truncate">{{cp[nameSpacePrefix+'CP_Opt_out__c']}}</span>
                                                </td>
                                                <td data-label="Action">
                                                    <button class="slds-button slds-button--small slds-button--brand addAirlineMember" ng-click="updateCommpRecord(cp)" onclick="return false;">Edit</button>
                                                    <button class="slds-button slds-button--small slds-button--brand addAirlineMember" ng-click="deleteCommpRecord(cp)" onclick="return false;">Delete</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>   
                                <button class="slds-button slds-button--brand addAirlineMember" style="float: right; margin-top: 1%;" ng-click="createCommpRecord();" onclick="return false;">New</button>  
                                <br/>
                                <br/>
                                <br/>
                                         
                                <h3 class="slds-section-title--divider slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1" >Airline memberships</h3>
                                
                                <div class="slds-scrollable--x slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-1 " ng-show="addressContact[nameSpacePrefix+'Airline_memberships__r'].totalSize>0">
                                    <table class="slds-table slds-table--bordered">
                                        <thead>
                                            <tr class="slds-text-heading--label">
                                                <th class="slds-is-sortable" scope="col">
                                                    <span class="slds-truncate">Airline Membership Number</span>
                                                    <button class="slds-button slds-button--icon-bare">
                                                        <svg aria-hidden="true" class="slds-button__icon slds-button__icon--small">
                                                            <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/standard-sprite/svg/symbols.svg#arrowdown')}"></use>
                                                        </svg>
                                                        <span class="slds-assistive-text">Sort</span>
                                                    </button>
                                                </th>
                                                <th scope="col">
                                                    <span class="slds-truncate">Airline</span>
                                                </th>
                                                <th scope="col">
                                                    <span class="slds-truncate">Action</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="slds-hint-parent" ng-repeat="airlineMembership in addressContact[nameSpacePrefix+'Airline_memberships__r'].records">
                                                <td data-label="Airline Membership Number" role="row">
                                                    <a href="/{{airlineMembership.Id}}" target="_blank" class="slds-truncate">{{airlineMembership.Name}}</a>
                                                </td>
                                                
                                                <td data-label="Airline">
                                                    <span class="slds-truncate">{{airlineMembership[nameSpacePrefix+'AM_Airline__c']}}</span>
                                                </td>
                                                <td data-label="Action">
                                                    <button class="slds-button slds-button--small slds-button--brand addAirlineMember" ng-click="updateMembershipRecord(airlineMembership)" onclick="return false;">Edit</button>
                                                    <button class="slds-button slds-button--small slds-button--brand addAirlineMember" ng-click="deleteMembershipRecord(airlineMembership)" onclick="return false;">Delete</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>   
                                <button class="slds-button slds-button--brand addAirlineMember" style="float: right; margin-top: 1%;" ng-click="createMembershipRecord();" onclick="return false;">New</button>  
                            </div>
                            
                            <div class="slds-modal__footer">
                                <div class="slds-x-small-buttons">
                                  <!-- <button class="slds-button slds-button--brand" ng-show="addressContact.Id !== undefined" ng-click="saveContactBrochureRequest()" onclick="return false;">Brochure Request</button> -->
                                  <button class="slds-button slds-button--brand" ng-show="addressContact.Id !== undefined" ng-click="saveContactAddress()" onclick="return false;">Save &amp; Close</button>
                                  <button class="slds-button slds-button--brand" ng-show="addressContact.Id === undefined" ng-click="updateContactAddress()">Save &amp; Close</button>
                                </div>
                            </div>
                        </div>
                   </div>
                <div style="display:none;" class="contactAddress slds-backdrop slds-backdrop--open"></div>
                <c:AirlineMembershipComponent ></c:AirlineMembershipComponent>
                <c:CommunicationPreferenceComponent ></c:CommunicationPreferenceComponent>
                <!-- SB save AS -->
                <div ng-form="SBSaveFor">
                    <div aria-hidden="false" style="display:none;" role="dialog" class="slds-modal slds-fade-in-open SBSaveFor">
                        <div class="slds-modal__container">
                            <div class="slds-modal__header">
                                <h2 class="slds-text-heading--medium" style="float:left;font-size:17px;">Select Client Group</h2>
                                <button ng-disabled="SBSaveFor.$invalid" class="slds-button slds-button--icon-inverse slds-modal__close closeTaskDetail" onclick="return false;">
                                    <svg aria-hidden="true" class="slds-button__icon slds-button__icon--large">
                                        <use xlink:href="{!URLFOR($Resource.SLDS011, '/assets/icons/utility-sprite/svg/symbols.svg#close')}"></use>
                                    </svg>
                                    <span class="slds-assistive-text">Close</span>
                                </button>
                            </div>
                            <div class="slds-modal__content slds-scrollable--x" style="overflow-y : auto !important">
                                <div class="slds-p-around--medium">
                                    <div class="slds-grid slds-wrap">
                                        <div class="slds-col slds-size--1-of-1 slds-medium-size--1-of-1 slds-large-size--1-of-3">
                                            <div class="form-wrap slds-grid slds-wrap slds-m-right--x-small">
                                                <div class="slds-form-element slds-col slds-size--1-of-1 slds-medium-size--2-of-2 slds-large-size--3-of-3">
                                                    <label class="slds-form-element__label" for="inputNameSample1">Client Group</label>
                                                      <span class="required-field">* </span> 
                                                        <div class="slds-form-element__control">
                                                        <select id="selectedClient" ng-required="!items['{!nameSpacePrefix}SB_Is_Standard__c']" class="slds-select" ng-model="items['{!nameSpacePrefix}SB_Client_Group__c']" ng-options="record.value as record.label for record in supplierCosts[0].lstClients">
                                                            <option value="" label="--Select--"></option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-modal__footer">
                                <div class="slds-x-small-buttons--horizontal">
                                    <button class="slds-button slds-button--neutral slds-button--brand" ng-disabled="SBSaveFor.$invalid" onclick="$('.SBSaveFor').toggle('hide')">Save</button>
                                    <button class="slds-button slds-button--neutral slds-button--brand" ng-disabled="SBSaveFor.$invalid" onclick="$('.SBSaveFor').toggle('hide')">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="display:none;" class="slds-backdrop slds-backdrop--open SBSaveFor"></div>
                </div>         
                <apex:include pageName="IBCalculation"/>
                        
                        <script>
                            $('.accountAddrees .slds-modal__close').on('click', function(){
                                $('.accountAddrees').toggle('hide');    
                            });
                            $('.accountAddrees .closeButton').on('click', function(){
                                $('.accountAddrees').toggle('hide');    
                            });
                            
                            $('.groupMembers .slds-modal__close').on('click', function(){
                                $('.groupMembers').toggle('hide');    
                            });
                            $('.groupMembers .closeButton').on('click', function(){
                                $('.groupMembers').toggle('hide');    
                            });
                            $('.changeDates .slds-modal__close').on('click', function(){
                                $('.changeDates').toggle('hide');    
                            });
                            $('.changeDates .closeButton').on('click', function(){
                                $('.changeDates').toggle('hide');    
                            });
                            
                             $('.closeaddAirlineMember').on('click', function(){
                                $('.airlineMemberShip').toggle('hide');     
                                $('.contactAddress').toggle('show');
                            });
                            $('.closeaddCommp').on('click', function(){
                                $('.communicationP').toggle('hide');     
                                $('.contactAddress').toggle('show');
                            });
                            
                            
                             $('.notesPopup.slds-modal__close').on('click', function(){
                                $('.notesPopup').toggle('hide');    
                            });
                            $('.notesPopup.closeButton').on('click', function(){
                                $('.notesPopup').toggle('hide');    
                            });
                        </script>
                        

                    </div>
                </div>
            </div>
        </body>
    </html>
</apex:page>